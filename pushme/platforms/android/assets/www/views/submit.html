<!DOCTYPE html>
<html>
<head>
	<title>Submit | Push Me!</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="../css/pure-min.css">
	<link rel="stylesheet" href="../css/extend-pure.css" type="text/css">
	<link rel="stylesheet" href="../css/style.css" type="text/css">
	<link rel="stylesheet" href="../css/side_menu.css" type="text/css">
	<link rel="stylesheet" href="../css/jquery-ui.min.css" type="text/css">
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
	<div id="layout"> 
	<!-- Menu toggle -->
	<a href="#menu" id="menuLink" class="menu-link">
	<!-- Hamburger icon -->
	<span></span>
	</a>
		<div id="menu" class="active">
			<div class="pure-menu pure-menu-open">
				<a class="pure-menu-heading" href="index.html">Top</a>
				<ul>
					<li><a href="submit.html">登録</a></li>
					<li><a href="decide.html">選択</a></li>
					<li><a href="listclips.html">クリップ</a></li>
					<li><a href="regitemslist.html">登録データ一覧</a></li>
					<li><a href="#">Coming Soon...</a></li>
				</ul>
			</div>
		</div>
	</div>
	<div class="main">
		<div class="header">
			<h1>お店を登録する</h1>
		</div>
		<form id="regForm" class="pure-form pure-form-aligned">
			<div class="content">
				<h2 class="content-subhead">*カテゴリ</h2>
				<p><input type="text" id="category" placeholder="カテゴリ" /></p>
				<h2 class="content-subhead">*名前</h2>
				<p><input type="text" id="name" placeholder="名前" /></p>
				<h2 class="content-subhead">説明</h2>
				<p><input type="text" id="description" placeholder="説明" /></p>
				<p><input type="button" id="confirmAdd" value="登録" class="pure-button pure-button-primary" ></p>
				<div id="regConfirm" title="データ登録"></div>
				<div id="regComplete" title="登録完了" >登録完了</div>
				<div id="requireAlart" title="警告" >必須項目を入力してください</div>
			</div>
		</form>
	</div>
<script src="../js/jquery.min.js" type="text/javascript" ></script>
<script src="../js/jquery-ui.min.js" type="text/javascript"></script>
<script type="text/javascript" src="../js/database.js"></script>
<script src="../js/side_menu.js"></script>
<script type="text/javascript" >
// 登録する情報
var cate;
var name;
var desc;

$('#regConfirm').dialog({
	autoOpen: false,
	resizable: false,
	modal: true,
	height: 250,
	width: 300,
	buttons: {
		"Yes": function(){
			$(this).dialog("close");
			openDB().then(function(){
				addItemtoDB(cate, name, desc).then(function(){
        			$('#regComplete').dialog("open");
				}, function(err){
					alert(err);
				});
			});
		},
		"Cancel": function(){
			$(this).dialog("close");
		}
	}
});

$('#regComplete').dialog({
    autoOpen: false,
    resizable: false,
    modal: true,
    height: 200,
    width: 250,
    buttons: {
        "OK": function(){
            $(this).dialog("close");
            location.href = "./index.html";
        }
    }
});

$('#requireAlart').dialog({
    autoOpen: false,
    resizable: false,
    modal: true,
    height: 200,
    width: 250,
    buttons: {
        "OK": function(){
            $(this).dialog("close");
        }
    }
});

$('#confirmAdd').click(function(){
	cate = $('#category').val();
    name = $('#name').val();
    desc = $('#description').val();
    if( cate == "" || name == ""){
    	$('#requireAlart').dialog("open");
    } else {
		$('#regConfirm').html("以下の項目で登録しますか？<br>カテゴリ: " + cate + "<br>名前: " + name + "<br>説明: " + desc);
		$('#regConfirm').dialog("open");
	}
});

</script>
</body>
